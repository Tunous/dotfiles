# --- TMUX.CONF --------------------------------------------------------
#
# Configuration file for tmux (terminal multiplexer)
# Highly based on z-brah configuration:
# http://git.z3bra.org/cgit.cgi/dotfiles/tree/tmux.conf
#
# ----------------------------------------------------------------------

## PREFIX KEY {{{
    ## Set the prefix key to Ctrl-Space
    unbind-key C-b
    set-option -g   prefix C-Space
    bind-key        C-Space send-prefix
## }}}

## STANDARD OPTIONS {{{
    ## Remove Esc-Wait (makes Vi works)
    set-option -sg  escape-time 0

    ## Show statusline message for longer
    set-option -g   display-time 4000

    ## All kind of options
    set-option -g   history-limit 1024
    set-option -g   bell-action any
    set-option -g   default-terminal screen-256color
    set-option -g   display-panes-colour red
    set-option -g   message-bg default
    set-option -g   message-fg white
    set-option -g   mouse-select-pane off
    set-option -g   set-titles on
    set-option -g   set-titles-string '#W #T'

    set-window-option -g   aggressive-resize on
    set-window-option -g   monitor-activity on
    set-window-option -g   visual-activity off
    set-window-option -g   visual-bell off
    set-window-option -g   automatic-rename on

    ## Detach session
    bind-key d      detach
    bind-key C-d    detach
## }}}

## STATUS BAR {{{
    ## Standard options
    set-option -g   status on
    set-option -g   automatic-rename on
    set-option -g   status-interval 15
    set-option -g   status-utf8 on
    set-option -g   status-justify right
    set-option -g   status-position bottom

    ## Default statusbar colors
    set-option -g   status-fg black
    set-option -g   status-bg default
    set-option -g   status-attr bright

    ## Default window title colors
    set-window-option -g   window-status-fg black
    set-window-option -g   window-status-bg default
    set-window-option -g   window-status-format '-'

    ## Active window title colors
    set-window-option -g   window-status-current-fg blue
    set-window-option -g   window-status-current-bg default
    set-window-option -g   window-status-current-format '-'

    ## Window with activity title colors
    set-window-option -g   window-status-activity-fg yellow
    set-window-option -g   window-status-activity-attr bright

    ## Default pane border color
    set-option -g   pane-border-bg default
    set-option -g   pane-border-fg black

    # Active pane border color
    set-option -g   pane-active-border-bg default
    set-option -g   pane-active-border-fg black

    # Left / Right status
    set-option -g   status-left-length 0
    set-option -g   status-right-length 96
    set-option -g   status-left ""
    set-option -g   status-right ""
## }}}

## KEY MAPPING {{{
    ## Move around windows
    unbind-key c       ; bind-key c     new-window
    unbind-key n       ; bind-key n     next-window
    unbind-key p       ; bind-key p     previous-window
    unbind-key C-Left  ; bind-key -n C-Left  prev
    unbind-key C-Right ; bind-key -n C-Right next
    unbind-key Space   ; bind-key Space last-window

    ## Choose windows
    unbind-key w       ; bind-key w     choose-window
    unbind-key *       ; bind-key *     list-windows

    ## Choose session
    unbind-key S       ; bind-key S     choose-session

    ## Prompts
    unbind-key :       ; bind-key :     command-prompt -p "Tmux:"
    unbind-key m       ; bind-key m     command-prompt -p "Man:" "split-window -h 'man %%'"
    unbind-key A       ; bind-key A     command-prompt -p "Rename window:" "rename-window '%%'"

    ## Create / Delete panes
    unbind-key |       ; bind-key |     choose-window "join-pane -h -s '%%'"
    unbind-key -       ; bind-key -     choose-window "join-pane -v -s '%%'"
    unbind-key o       ; bind-key o     break-pane
    unbind-key r       ; bind-key r     break-pane -d

    ## Move around panes
    bind-key -n C-h run "(tmux display-message -p '#{pane_current_command}' | grep -iqE '(^|\/)g?(view|vim?)(diff)?$' && tmux send-keys C-h) || tmux select-pane -L"
    bind-key -n C-j run "(tmux display-message -p '#{pane_current_command}' | grep -iqE '(^|\/)g?(view|vim?)(diff)?$' && tmux send-keys C-j) || tmux select-pane -D"
    bind-key -n C-k run "(tmux display-message -p '#{pane_current_command}' | grep -iqE '(^|\/)g?(view|vim?)(diff)?$' && tmux send-keys C-k) || tmux select-pane -U"
    bind-key -n C-l run "(tmux display-message -p '#{pane_current_command}' | grep -iqE '(^|\/)g?(view|vim?)(diff)?$' && tmux send-keys C-l) || tmux select-pane -R"

    ## Reload config
    unbind-key R       ; bind-key R         source-file "$HOME/.tmux.conf" \; display-message "Configuration reloaded!"

    ## Clear Screen
    unbind-key C-l     ; bind-key C-l   send-keys 'C-l'

    ## Copy-mode
    set-window-option -g    mode-keys vi
    set-window-option -g    mode-mouse off
    set-option              buffer-limit 10

    ## Split window
    unbind-key s  ; bind-key s split-window -v
    unbind-key v  ; bind-key v split-window -h

    ## Resize panes
    bind-key -r M-h resize-pane -L 5
    bind-key -r M-j resize-pane -D 5
    bind-key -r M-k resize-pane -U 5
    bind-key -r M-l resize-pane -R 5
## }}}

# vim:ft=tmux:foldmethod=marker:cms=#\ %s
